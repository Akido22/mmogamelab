<!-- doc.title Система локаций в конструкторе игр -->
<!-- doc.parent index -->
<!-- doc.keywords локации, редактор локаций, онлайн-игры -->
<!-- doc.description Описание работы редактора локаций в конструкторе онлайн-игр -->

<p>Локация &mdash; это атомарное местоположение персонажа в мире. Персонаж не может находиться "в левой части локации" или "в правой части локации". Он может быть просто в локации.</p>

<h1>Как создать локацию</h1>
<ul>
	<li>Зайдите в раздел "Локации / Редактор локаций" и выберите пункт "Новая локация": <img class="doc-screenshot" src="/st/tutorial/locations-1.png" alt="" /></li>
	<li>укажите название локации во всех требуемых склонениях;</li>
	<li>параметр "задержка при переходе в локацию и из неё" отвечает за вычисление времени, в течение которого игрок должен будет ждать, пока его персонаж переходит в другую локацию. При вычислении времени перехода складывается задержка обеих локаций, и столько секунд персонаж будет переходить;</li>
	<li>параметры "локация сверху, снизу, слева и справа" &mdash; это способ навигации между локациями "по компасу". Если задать эти значения, то рядом с локацией отобразятся стрелочки, нажатием на которые можно перейти в указанном направлении;</li>
	<li>"тип изображения" &mdash; это способ визуализации локации. В данный момент доступен только вариант "Статическая картинка" (см. ниже).</li>
</ul>

<h2>Статическая картинка</h2>
<p>Тип визуализации "статическая картинка" &mdash; это режим, в котором администратор игры загружает картинку, подготовленную им самостоятельно, которая и будет служить изображением локации. При выборе этого типа визуализации у вас появится кнопка, открывающая редактор карты изображения: <img class="doc-screenshot" src="/st/tutorial/locations-2.jpg" alt="" /></p>
<p>При переходе в редактор изображения вам будет доступна возможность при помощи мыши отметить активные зоны на изображении, при нажатии на которые будет происходить какое-либо действие: <img class="doc-screenshot" src="/st/tutorial/locations-3.jpg" alt="" /></p>

<a name="stretch"></a>
<p>Администратор имеет возможность настроить автоматическое растягивание (или сжатие) изображения, чтобы оно точно поместилось в игровой фрейм. Для этого необходимо установить галочку "Растянуть изображение на весь фрейм": <img class="doc-screenshot" src="/st/tutorial/locations-6.png" alt="" /></p>
<p>Задание полей позволяет настроить систему таким образом, чтобы картинка растягивалась не на весь экран, а на меньшую область &mdash; так, чтобы оставить место для меню, навигации и каких-либо ещё полей.</p>

<a name="multistatic"></a>
<h2>Несколько статических изображений с различными размерами</h2>
<p>Тип визуализации "Несколько статических изображений с различными размерами" &mdash; это режим, в котором администратор загружает несколько картинок, адаптированных для разных разрешений экрана, и система автоматически выберет оптимально подходящую.</p>
<p>При выборе этого режима вам необходимо сразу загрузить одно из изображений. Чтобы добавить ещё изображения, воспользуйтесь полем "Добавить картинку локации с другим размером": <img class="doc-screenshot" src="/st/tutorial/locations-7.png" alt="" /></p>
<p>После загрузки всех локаций в верхнем меню появятся ссылки на редактирование карт. Для каждого изображения карта будет своей. Использование редактора карт осуществляет так же, как и для режима отображения с одной статической картинкой.</p>

<h1>Как задать свойства переходов</h1>
<p>После того, как вы определите какие-либо переходы между локациями (либо при помощи стрелочек влево-вправо, либо при помощи редактора карты изображения), у вас появится возможность задать этим переходам дополнительные параметры. Для этого зайдите в редактор локации, и вы увидите внизу новые поля формы: <img class="doc-screenshot" src="/st/tutorial/locations-4.png" alt="" /></p>
<ul>
	<li>подсказка при наведении мыши &mdash; это произвольный текст (допускается использование HTML-тегов), который отобразится во всплывающей подсказке при наведении мыши на стрелочку или активную зону на локации. Если в тексте вы будете использовать картинки, то обязательно укажите им ширину и высоту &mdash; иначе это может привести к проблемам с вёрсткой;</li>
	<li>задержка при перемещении &mdash; если вы не хотите, чтобы задержка при переходе рассчитывалась автоматически как сумма задержек двух локаций, то можете конкретно для этого перехода вручную задать желаемое время перехода.</li>
</ul>

<a name="config"></a>
<h1>Настройки системы локаций</h1>
<p>В меню "Локации / Конфигурация локаций" у вас есть возможность настроить дополнительные параметры, определяющие работу системы локаций: <img class="doc-screenshot" src="/st/tutorial/locations-5.png" alt="" /></p>
<ul>
	<li>стартовая локация &mdash; это локация, в которой появляются только что зарегистрированные персонажи;</li>
	<li>выражение для задержки перехода между локациями &mdash; это возможность задать глобальный модификатор скорости перемещения на <a href="/doc/script">скриптовом языке</a>. base_delay &mdash; это базовая задержка, которая вычисляется по правилам, указанным выше в этом разделе. Если вы хотите, чтобы при подключении платной услуги fastmove ("ускоренное перемещение") персонаж двигался в 2 раза быстрее, то нам необходимо разделить base_delay на (1 + char.mod.fastmove). Если услуга не подключена, то char.mod.fastmove=0, и задержка будет просто равна base_delay. Если услуга подключена, то char.mod.fastmove=1, и задержка получится base_delay / 2. Примеры других выражений:<ul>
		<li>base_delay / (1 + char.mod.fastmove * 2) &mdash; платная услуга ускоряет в 3 раза;</li>
		<li>base_delay / (1 + char.mod.fastmove * 0.5) &mdash; платная услуга ускоряет в 1.5 раза;</li>
		<li>base_delay - char.mod.fastmove * 3 &mdash; платная услуга ускоряет переход на 3 секунды.</li>
	</ul></li>
</ul>

<a name="templates"></a>
<h1>Вёрстка интерфейса локации</h1>
<p>Чтобы изменить вёрстку интерфейса локации, вы можете загрузить в <a href="/doc/design/gameinterface">шаблон оформления игры</a> дополнительные файлы, которые движок конструктора будет использовать вместо стандартных:</p>
<ul>
	<li><a href="/doc/game-template/location-layout.html">location-layout.html</a> &mdash; размещение элементов локации (локация, стрелки, текстовый список доступных локаций);</li>
	<li><a href="/doc/game-template/location-arrows.html">location-arrows.html</a> &mdash; стрелки перемещения между локациями вверх/вниз/влево/вправо;</li>
	<li><a href="/doc/game-template/location-transitions.html">location-transitions.html</a> &mdash; текстовый список переходов;</li>
	<li><a href="/doc/game-template/location-static.html">location-static.html</a> &mdash; статическая картинка и её карта изображения.</li>
</ul>
<p>Всем шаблонам передаются в качестве параметров ссылка на скриптовый объект персонажа char и ссылка на скриптовый объект локации loc.</p>

<h1>Специальные функции локаций</h1>
<p>К локациям можно подключать дополнительные функции, которые будут доступны только персонажам, находящимся в этих локациях. Подробнее об их настройке написано в разделе <a href="/doc/locfunc">Спецфункции локаций</a>.</p>

<h1>Дополнительно</h1>

<ul>
	<li><a href="/doc/startloc">Стартовые локации персонажей</a></li>
	<li><a href="/doc/script">Скриптовый движок</a></li>
</ul>
