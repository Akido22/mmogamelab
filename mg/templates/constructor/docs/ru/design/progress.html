<!-- doc.title Оформление прогресс-баров в конструкторе игр -->
<!-- doc.parent index -->
<!-- doc.keywords прогрессбары, прогресс бары, полоски -->
<!-- doc.description Информация об оформлении прогресс-баров в конструкторе игр -->

<h1>Оформление прогресс-баров в конструкторе игр</h1>

<p>Администратор игры может поместить в игровой интерфейс различные прогресс-бары, которые будут отображать игровые параметры.</p>

<p>Самый простой способ поместить в игровой интерфейс прогресс-бар &mdash; это выбрать в редакторе панелей тип блока "Прогресс-бар" и заполнить поле "Прогресс-бары" идентификаторами прогресс-баров, которые вы хотите отобразить: <img class="doc-screenshot" src="/st/tutorial/progress-1.png?1" alt="" /></p>

<p>Если указать несколько идентификаторов прогресс-баров через запятую: <img class="doc-screenshot" src="/st/tutorial/progress-2.png" alt="" /></p>
<p>то в одном блоке будет размещено несколько прогресс-баров один рядом с другим: <img class="doc-screenshot" src="/st/tutorial/progress-3.png" alt="" /></p></p>

<h1>Виды прогресс-баров</h1>

<p>В зависимости от набора подключенных модулей, могут быть доступны различные типы прогресс-баров. Их описания приведены над формой списка:<ul>
<li><strong>location-movement</strong> &mdash; индикатор задержки до перехода в следующую локацию;</li>
<li><strong>charparam-&lt;name&gt;-&lt;max_name&gt;</strong> &mdash; полоса, обновляемая автоматически при изменении параметров персонажа "name" и "max_name". Длина прогресс-бара будет определяться отношением name / max_name. Например, если у персонажа есть параметры, отвечающие за ману (mana и max_mana), то прогресс-бар "charparam-mana-max_mana" будет отображать текущий запас маны. Информация об использовании динамических параметров приведена на странице "<a href="/doc/dynamic">Параметры, изменяющиеся со временем</a>".</li>
</ul>

<h1>Скриптовое управление прогресс-барами</h1>

<p>Пользуясь командами JavaScript, вы можете управлять значениями, отображаемыми в прогресс-барах. К примеру, если выполнить команды JavaScript:</p>
<pre class="doc-code-sample">
Game.progress_set('test1', 0.3);
Game.progress_set('test2', 0.7);
</pre>

<p>то прогресс-бар test1 будет установлен в 30%, а test2 &mdash; в 70%: <img class="doc-screenshot" src="/st/tutorial/progress-4.png" alt="" /></p>

<p>Кроме установки фиксированной ширины прогресс-бара есть возможность запускать прогресс-бар, который будет постепенно изменять своё значение:</p>
<pre class="doc-code-sample">
Game.progress_run('identifier', start_ratio, end_ratio, time_till_end);
</pre>
<p>К примеру, чтобы заставить прогресс-бар test1 автоматически расшириться с значения 0.3 до значения 1 за 2500 миллисекунд, вызовите:</p>
<pre class="doc-code-sample">
Game.progress_run('test2', 0.3, 1, 2500);
</pre>

<h1>Стилевое оформление прогресс-баров</h1>

<p>Вы можете задавать произвольное оформление прогресс-барам при помощи CSS. Для каждого прогресс-бара определены 3 CSS-класса:</p>
<ul>
	<li>progress-<strong>идентификатор</strong> &mdash; этот класс прописывается для всех прогресс-баров с указанным идентификатором;</li>
	<li><strong>идентификатор</strong>-notfull &mdash; этот класс прописывается для прогресс-баров, значение которых меньше 100%;</li>
	<li><strong>идентификатор</strong>-full &mdash; этот класс прописывается для всех прогресс-баров, значение которых равно 100%.</li>
</ul>

<p>Например, если добавить следующие CSS-определения:</p>
<pre class="doc-code-sample">
.progress-test1 { background-color: red }
.test2-notfull { background-color: yellow }
.test2-full { background-color: green }
</pre>

<p>то прогресс-бары будут выглядеть вот так: <img class="doc-screenshot" src="/st/tutorial/progress-5.png" alt="" /></p>

<h1>Ручное оформление прогресс-баров</h1>

<p>При выборе типа блока "Прогресс-бар" HTML-код формируется автоматически. Вы можете написать его самостоятельно, если существующие варианты по каким-то причинам вас не устраивают.</p>
<p>Когда движок конструктора хочет изменить ширину прогресс-бара, он выполняет следующие действия:</p>
<ul>
	<li>ищет на странице элементы с классом "progress-<strong>идентификатор</strong>";</li>
	<li>если у этого элемента установлен класс "progress-indicator-horizontal", то движок будет менять ему ширину. Для этого он узнаёт текущую ширину родительского элемента, умножает на текущее значение прогресс-бара и устанавливает рассчитанную ширину;</li>
	<li>если у этого элемента установлен класс "progress-indicator-vertical", то движок будет аналогично менять ему высоту;</li>
	<li>устанавливаются или снимаются классы <strong>идентификатор</strong>-full и <strong>идентификатор</strong>-notfull.
</ul>

<p>Вы можете поместить прогресс-бар в любое место интерфейса. Можно через редактор панелей в блок с проивольным HTML-кодом, а можно непосредственно в HTML-шаблон игрового интерфейса. Для примера создадим блок: <img class="doc-screenshot" src="/st/tutorial/progress-6.png" alt="" /></p>

<p>Получается такой прогресс-бар для перемещения по локациям: <img class="doc-screenshot" src="/st/tutorial/progress-7.png" alt="" /></p>

<p>Если заменить класс progress-indicator-horizontal на progress-indicator-vertical, то прогресс-бар станет вертикальным: <img class="doc-screenshot" src="/st/tutorial/progress-8.png" alt="" /></p>

<p>Если оставить и progress-indicator-horizontal, и progress-indicator-vertical, то движок будет изменять и ширину, и высоту блока. Получится белый растущий квадратик: <img class="doc-screenshot" src="/st/tutorial/progress-9.png" alt="" /></p>

<h1>Дополнительно</h1>

<ul>
	<li><a href="/doc/design/gameinterface">Оформление игрового интерфейса</a></li>
	<li><a href="/doc/design/gameinterface-structure">Структура игрового интерфейса</a></li>
	<li><a href="/doc/quests#javascript">Исполнение JavaScript через квестовый движок</a></li>
</ul>
