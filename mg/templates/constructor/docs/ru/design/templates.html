<!-- doc.title HTML-шаблоны для конструктора онлайн-игр -->
<!-- doc.parent index -->
<h1>HTML-шаблоны для конструктора онлайн-игр</h1>

<p>Оформление браузерной игры состоит из трёх основных частей:</p>
<ul>
	<li>оформления титульной страницы;</li>
	<li>оформления самой игры;</li>
	<li>оформления социальных разделов (форума, блога и т.п.).</li>
</ul>
<p>Каждая из этих частей настраивается индивидуально и представляет собой HTML-страницу, свёрстанную при помощи инструкций шаблонизатора. Шаблонизатор&nbsp;&mdash; это программный компонент, подставляющий данные, которые нужно отобразить на странице, в шаблон оформления. Работа шаблонизатора будет рассмотрена подробнее.</p>

<h1>Подготовка страницы для шаблонизатора</h1>

<p>В качестве примера попробуем сделать простую титульную страницу для игры. Оформление намеренно сделаем упрощённым, чтобы не перегружать пример деталями. Для начала сделаем простую заготовку:</p>

<pre class="doc-code-sample">
<strong>index.html</strong>
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru"&gt;
        &lt;head&gt;
                &lt;meta http-equiv="Content-type" content="text/html; charset=utf-8" /&gt;
                &lt;link rel="stylesheet" href="index.css" type="text/css" /&gt;
        &lt;/head&gt;
        &lt;body&gt;
                Пример титульной страницы
        &lt;/body&gt;
&lt;/html&gt;
</pre>
<pre class="doc-code-sample">
<strong>index.css</strong>
body { background-color: #c0c0c0 }
</pre>

<p>Каждый HTML-файл в шаблоне для конструктора должен:</p>
<ul>
	<li>быть корректным XHTML-документом и иметь правильный заголовок &lt;!DOCTYPE ...&gt;;</li>
	<li>быть написан в кодировке utf-8 и иметь соответствующую запись &lt;meta http-equiv="Content-type" content="text/html; charset=utf-8" /&gt;.</li>
</ul>

<p>После того, как шаблон подготовлен, его следует упаковать в zip-архив и загрузить в конструктор. Когда шаблон загрузится в конструктор, вы сможете посмотреть, как он будет отображаться, при помощи ссылки "предварительный просмотр". В дальнейших примерах будем показывать только текст, размещённый между тегами &lt;body&gt; и &lt;/body&gt;. Посмотрим, что получится из нашего примера:</p>

<table class="doc-code-table">
	<tr>
		<td class="doc-code">
<pre class="doc-code-sample">
Пример титульной страницы
</pre>
		</td>
		<td class="doc-code-preview">
			<img src="/st/constructor/doc/design/sample-1.png" alt="" />
		</td>
	</tr>
</table>

<p>Теперь можно усложнить пример и добавить в статичную HTML-страницу немного магии. Допустим, мы хотим вставить информацию о копирайте: "&copy; Ваше имя, 2010-2011". Причём сделать, чтобы вместо 2011 автоматически показывался текущий год. Нет ничего проще:</p>

<table class="doc-code-table">
	<tr>
		<td class="doc-code">
<pre class="doc-code-sample">
Пример титульной страницы
&lt;div&gt;&amp;copy; Ваше имя, 2010-&#x5b;%year%]&lt;/div&gt;
</pre>
		</td>
		<td class="doc-code-preview">
			<img src="/st/constructor/doc/design/sample-2.png" alt="" />
		</td>
	</tr>
</table>

<p>У шаблонизатора есть определённый набор данных, которые можно подставлять в текст документа. Одним из них является &#x5b;%year%]. Есть и другие, их список различен для разных интерфейсов и приводится в посвящённых им разделах. Теперь посмотрим на возможности шаблонизатора, позволяющие выводить повторяющиеся элементы оформления. Например, рассмотрим меню. Количество и содержание пунктов меню может различаться в зависимости от того, авторизован пользователь или нет, от того, каким функции подключены к игре&nbsp;&mdash; есть ли у неё форум, библиотека и т.д. Оформление титульной страницы игры должно уметь выводить произвольный набор пунктов меню. Посмотрим, как это сделать на шаблонизаторе:</p>

<table class="doc-code-table">
	<tr>
		<td class="doc-code">
<pre class="doc-code-sample">
&#x5b;%for link in links%]
&lt;div&gt;&#x5b;%link.title%]&lt;/div&gt;
&#x5b;%end%]
&lt;div&gt;&amp;copy; Ваше имя, 2010-&#x5b;%year%]&lt;/div&gt;
</pre>
		</td>
		<td class="doc-code-preview">
			<img src="/st/constructor/doc/design/sample-3.png" alt="" />
		</td>
	</tr>
</table>

<p>В этом примере наш шаблон обращается к списку links, содержащему ссылки, которые должны быть на титульной странице игры. Всё, что находится между инструкциями &#x5b;%for link in links%] и &#x5b;%end%], будет выведено на страничку столько раз, сколько ссылок будет на странице. В данном случае это блок &lt;div&gt;&#x5b;%link.title%]&lt;/div&gt;, который просто выводит название пункта меню. Обратите внимание, что название параметра начинается с "link.", что означает обращение к параметрам ссылки, которую в данный момент формирует шаблонизатор. Теперь сделаем пункты меню кликабельными. Страница, на которую должна указывать ссылка, передаётся в параметре "link.href":</p>

<table class="doc-code-table">
	<tr>
		<td class="doc-code">
<pre class="doc-code-sample">
&#x5b;%for link in links%]
&lt;div&gt;&lt;a href="&#x5b;%link.href%]"&gt;&#x5b;%link.title%]&lt;/a&gt;&lt;/div&gt;
&#x5b;%end%]
&lt;div&gt;&amp;copy; Ваше имя, 2010-&#x5b;%year%]&lt;/div&gt;
</pre>
		</td>
		<td class="doc-code-preview">
			<img src="/st/constructor/doc/design/sample-4.png" alt="" />
		</td>
	</tr>
</table>

<p>Как вы видите, в простой HTML-код встраиваются специальные инструкции, вместо которых шаблонизатор будет подставлять данные из движка игры. Ещё один вид инструкций шаблонизатора, который стоит знать, это условия. Если какой-то блок данных иногда может присутствовать, а иногда нет, следует обернуть его в инструкцию проверки условия. Скажем, в примере с меню игры некоторые ссылки должны быть кликабельными, а некоторые&nbsp;&mdash; нет. Такие ситуации возникают довольно часто, и вам важно уметь проверять, есть ли ссылка, и если есть, то выводить HTML-тег для ссылки, а если нет, то просто писать некликабельный текст:</p>

<table class="doc-code-table">
	<tr>
		<td class="doc-code">
<pre class="doc-code-sample">
&#x5b;%for link in links%]
&lt;div&gt;
	&#x5b;%if link.href%]&lt;a href="&#x5b;%link.href%]"&gt;&#x5b;%end%]
	&#x5b;%link.title%]
	&#x5b;%if link.href%]&lt;/a&gt;&#x5b;%end%]
&lt;/div&gt;
&#x5b;%end%]
&lt;div&gt;&amp;copy; Ваше имя, 2010-&#x5b;%year%]&lt;/div&gt;
</pre>
		</td>
		<td class="doc-code-preview">
			<img src="/st/constructor/doc/design/sample-5.png" alt="" />
		</td>
	</tr>
</table>

<p>Здесь теги &lt;a href="&#x5b;%link.href%]"&gt; и &lt;/a&gt; завёрнуты в инструкции проверки условия "а есть ли вообще ссылка": &#x5b;%if link.href%] и &#x5b;%end%]. Аналогичным образом можно проверять наличие любых других параметров. Полный список допустимых параметров приведён ниже в разделах, посвящённых отдельным интерфейсам игры. А пока, пользуясь полученными знаниями, сверстаем блок новостей проекта. Новости передаются в параметре шаблонизатора news. Выведем их в простом виде:</p>

<table class="doc-code-table">
	<tr>
		<td class="doc-code">
<pre class="doc-code-sample">
<strong>index.html</strong>
&#x5b;%if news%]
&lt;div class="news-header"&gt;Новое в игре&lt;/div&gt;
&lt;div class="news-list"&gt;
	&#x5b;%foreach n in news%]
	&lt;div class="news"&gt;
		&lt;div class="news-title"&gt;
			&lt;span class="news-date"&gt;&#x5b;%n.created%]&lt;/span&gt;
			&mdash; &#x5b;%n.subject%]
		&lt;/div&gt;
		&lt;p&gt;
			&#x5b;%n.announce%]
			&#x5b;%if n.more +%]
			&lt;a href="&#x5b;%n.more%]"&gt;Читать далее...&lt;/a&gt;
			&#x5b;%end%]
		&lt;/p&gt;
	&lt;/div&gt;
	&#x5b;%end%]
&lt;/div&gt;
&#x5b;%end%]
</pre>
<pre class="doc-code-sample">
<strong>index.css</strong>
.news-header { font-weight: bold }
.news { font-size: 11px; padding: 5px; border: solid 1px #808080;
	margin: 5px 0px 5px 0px; width: 480px }
.news p { margin-bottom: 0 }
.news-title { font-weight: bold; font-size: 12px }
</pre>
		</td>
		<td class="doc-code-preview">
			<img src="/st/constructor/doc/design/sample-6.png" alt="" />
		</td>
	</tr>
</table>

<p>Весь код обёрнут в &#x5b;%if news%] ... &#x5b;%end%]. Это значит, что если параметр news из движка не придёт, то блок новостей не будут показаны вообще. Если же news есть, то будет показан заголовок "Новое в игре", а затем при помощи &#x5b;%foreach n in news%] будут перебраны и показаны все новости. В этом примере у новости n показываются параметры:</p>
<ul>
	<li>n.created &mdash; дата публикации новости;</li>
	<li>n.subject &mdash; тема новости;</li>
	<li>n.announce &mdash; анонс новости;</li>
	<li>n.more &mdash; если у новости есть продолжение, то в n.more будет помещена ссылка на это продолжение.</li>
</ul>

<p>Дополнительно обратите внимание на плюс в теге &#x5b;%if n.more +%]. Дело в том, что если не указать плюс, то все пробелы после инструкции будут удалены шаблонизатором из документа. В нашем случае, чтобы ссылка "Читать далее" не слипалась с предыдущим текстом, нужно сохранить пробел перед ней. Чтобы явно запретить шаблонизатору удалять пробелы, нужно перед инструкцией или после неё поставить плюс. Плюс перед инструкцией означает, что шаблонизатору нельзя убирать пробелы перед ней. После инструкции, соответственно, нельзя убирать после. Таким же образом оформляются и остальные элементы титульной страницы.</p>

<p>Зачастую в списках чего-либо требуется вставлять какие-либо разделители между элементами. К примеру, если вы оформляете пункты меню как "Форум / Новости / Библиотека", то между элементами необходимо вставить разделяющий символ "/". Посмотрим, как помещать разделители между элементами:</p>

<table class="doc-code-table">
	<tr>
		<td class="doc-code">
<pre class="doc-code-sample">
<strong>index.html</strong>
&#x5b;%if news%]
&lt;div class="news-header"&gt;Новое в игре&lt;/div&gt;
&lt;div class="news-list"&gt;
	&#x5b;%foreach n in news%]
	&lt;div class="news"&gt;
		&lt;div class="news-title"&gt;
			&lt;span class="news-date"&gt;&#x5b;%n.created%]&lt;/span&gt;
			&mdash; &#x5b;%n.subject%]
		&lt;/div&gt;
		&lt;p&gt;
			&#x5b;%n.announce%]
			&#x5b;%if n.more +%]
			&lt;a href="&#x5b;%n.more%]"&gt;Читать далее...&lt;/a&gt;
			&#x5b;%end%]
		&lt;/p&gt;
	&lt;/div&gt;
	<strong>&#x5b;%unless n.lst%]&lt;div class="news-delim"&gt;&lt;/div&gt;&#x5b;%end%]</strong>
	&#x5b;%end%]
&lt;/div&gt;
&#x5b;%end%]
</pre>
<pre class="doc-code-sample">
<strong>index.css</strong>
.news-delim { margin-top: 5px; border-top: solid 1px #0000ff;
	width: 480px }
</pre>
		</td>
		<td class="doc-code-preview">
			<img src="/st/constructor/doc/design/sample-7.png" alt="" />
		</td>
	</tr>
</table>

<p>В этом примере мы добавили после каждой новости проверку &mdash; если у новости не установлен признак "lst" (который обозначает последний элемент списка), то будет выведен дополнительный разделитель. Признак lst устанавливается только у самого последнего элемента списка, и это позволяет делать оформления, в которых разделитель после последнего элемента не выводится.</p>

<h1>Оформление различных интерфейсов</h1>

<ul>
	<li><a href="/doc/design/indexpage">Титульная страница онлайн-игры</a></li>
	<li><a href="/doc/design/gameinterface">Игровой интерфейс онлайн-игры</a></li>
	<li><a href="/doc/design/sociointerface">Социальные сервисы онлайн-игры</a></li>
</ul>
