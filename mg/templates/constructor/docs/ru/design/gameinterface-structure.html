<!-- doc.title Редактор структуры игрового интерфейса -->
<!-- doc.parent index -->
<!-- doc.keywords структура, интерфейс, онлайн-игра -->
<!-- doc.description Описание конструктора игрового интерфейса -->

<h1>Структура интерфейса онлайн-игры</h1>

<p>При отображении игрового интерфейса конструктор собирает страницу из блоков, оформление которых задаётся через пакеты оформления (подробнее &mdash; на странице <a href="/doc/design/gameinterface">Игровой интерфейс онлайн-игры</a>). Чтобы задать общую структуру интерфейса, воспользуйтесь пунктом "Схема размещения" из меню "Интерфейс игры":</p>
<img class="doc-screenshot" src="/st/tutorial/gameinterface-2.png?1" alt="" />

<p>При задании ширины и высоты фреймов обратите внимание, что задать необходимо только одно поле с шириной и одно поле с высотой. К примеру, если на первой схеме (см. скриншот) вы зададите высоту игрового фрейма, то нижний фрейм займёт всё остальное пространство. Или наоборот - вы можете задать высоту чата, и тогда верхнему фрейму останется всё остальное.</p>

<p>Чтобы вокруг вашего игрового интерфейса были поля, из которых можно, к примеру, собрать декоративную рамку, укажите их ширину в соответствующих полях. Если какое-то значение оставить нулевым, то соответствующего поля не будет. Далее у вас есть выбор, какие панели оставить на экране, а какие убрать:</p>
<img class="doc-screenshot" src="/st/tutorial/panels.png" alt="" />

<p>После того, как вы указали желаемую структуру интерфейса и выбрали панели, которые вы хотите видеть, можно перейти к добавлению на панели кнопок и других элементов. Для этого перейдём в раздел "Интерфейс игры / Панели интерфейса". Вы увидите список панелей, которые в данный момент доступны в вашем оформлении:</p>
<img class="doc-screenshot" src="/st/tutorial/gameinterface-3.png" alt="" />

<p>Откроем меню любой из панелей и увидим примерно такой список:</p>
<img class="doc-screenshot" src="/st/tutorial/gameinterface-4.png" alt="" />

<p>Этот список показывает последовательность размещения блоков на панели, их размеры и функциональность. Перед тем, как углубиться в детали настройки блоков, разберёмся с общей структурой панелей и блоков:</p>
<img class="doc-screenshot" src="/st/tutorial/panels-blocks.png" alt="" />

<p>Ширина всей панели заранее неизвестна, поэтому все расчёты ширины входящих в панель блоков выполняются движком конструктора уже в браузере игрока. У любого блока вы можете задать фиксированную ширину в пикселях (как, например, пустые блоки в 10px на картинке) либо сделать блок "резиновым" &mdash; тянущимся вместе с панелью. Особняком стоит блок кнопок. Его ширина также неизвестна заранее, поскольку количество кнопок на панели может изменяться.</p>

<p>Подробное описание, как вставлять в игровой интерфейс прогресс-бары, приведено в разделе <a href="/doc/design/progress">Прогресс-бары</a>.</p>

<h2>Как работает установка ширины блоков</h2>
<ul>
	<li>Если блок имеет фиксированную ширину, то под него будет отведено ровно запрошенное количество пикселей.</li>
	<li>Ширина блока кнопок рассчитывается на лету, исходя из количества кнопок, которые нужно показать, и их размеров:
	<img class="doc-screenshot" src="/st/tutorial/buttons-block.png" alt="" />
	Из рисунка видно, что общая ширина блока будет равна сумме ширины левой и правой границ и суммарной ширины всех кнопок. Чтобы конструктор мог рассчитать шириную всего блока, ему понадобится явно указать в шаблоне оформления blocks.html суммарную ширину левой и правой границ, а также ширину одной кнопки. Это делается при помощи специального механизма подсказок (hints). Вам необходимо прописать в blocks.html строку следующего вида:
	<pre class="doc-code-sample">
&lt;div class="x-hidden" id="block-hints-horizontal"&gt;54,28&lt;/div&gt;
	</pre>
	Этот хинт задаёт размеры для горизонтальной панели кнопок: 54 &mdash; это ширина одной кнопки, а 28 &mdash; суммарная ширина левой и правой границ. Получив эти данные, конструктор сможет корректно рассчитать ширину блока кнопок.
	</li>
	<li>Остальные блоки считаются "резиновыми", и конструктор отдаст им всё свободное место, которое осталось на панели. Если у вас несколько резиновых блоков, то свободное место разделится между ними пропорционально параметру flex, который вы задаёте для каждого блока. Например, чтобы ширина двух резиновых блоков была одинаковой, пропишите каждому flex=1. Если хотите, чтобы первый был в 2 раза больше, чем второй, пропишите первому flex=2, а второму flex=1.</li>
</ul>

<a name="buttons"></a>
<h2>Редактор кнопок</h2>

<p>Редактор кнопок позволяет вам определить, какие кнопки на каком блоке кнопок вы хотите показывать. Поскольку разработчики игр самостоятельно выбирают, какие панели будут у них в игровом интерфейсе, им необходим механизм, чтобы "раскидать" доступные кнопки по блокам кнопок.</p>

<p>Для этого откройте раздел "Интерфейс игры / Редактор кнопок":</p>
<img class="doc-screenshot" src="/st/tutorial/gameinterface-5.png" alt="" />

<p>Здесь вы видите как список кнопок, автоматически предложенных конструктором, так и возможность создать свою собственную кнопку:</p>
<img class="doc-screenshot" src="/st/tutorial/gameinterface-6.png" alt="" />

<p>Особое внимание обратите на поле "Условие". Сюда помещается скрипт, позволяющий при некоторых условиях отключать кнопку. К примеру, вы можете сделать простой интерфейс для новичков (без ненужных им кнопок), и усложнённый для персонажей старшего уровня. Например, если какая-то функция доступна только персонажам с 4 уровня, напишите условие "char.level &gt;= 4". Подробное описание синтаксиса формул приведено в разделе <a href="/doc/script">скриптовый движок</a>.</p>

<p>Когда вы подключаете к вашей игре какой-либо новый модуль (к примеру, форум), то он может принести за собой новую кнопку в игровой интерфейс (открывающую этот самый форум). Эти новые кнопки появляются в нижней части страницы, и вы можете определить, в какой блок кнопок их поместить. Подробнее о модульной системе конструктора читайте в разделе <a href="/doc/modules">Модули конструктора</a>.</p>

<h2>Динамические блоки</h2>

<p>Администратор игры имеет возможность создавать в интерфейсе игры блоки, содержимое которых заполняется автоматически по программе, заданной <a href="/doc/script">текстовым скриптом</a>. Для этого можно либо в шаблоне blocks.html, либо через меню "Интерфейс игры / Панели интерфейса" создать блок и задать ему определённый CSS-класс, например "test-class".</p>

<p>Затем необходимо настроить <a href="/doc/dynamic#blocks">динамический блок интерфейса</a>, который будет искать этот элемент (для примера выше подойдёт селектор ".test-class") и заменять его содержимое вычисленным значением.</p>
