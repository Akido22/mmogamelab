<!-- doc.title Система инвентаря в конструкторе игр -->
<!-- doc.parent index -->
<!-- doc.keywords предметы, редактор предметов, инвентарь, онлайн-игры -->
<!-- doc.description Описание работы системы инвентаря в конструкторе онлайн-игр -->

<p>Система инвентаря позволяет администраторами онлайн-игр создавать в своих играх предметы, прописывать им характеристики, выдавать и изымать предметы у персонажей и предоставлять аналогичный функционал другим системам игры.</p>

<p>Чтобы в игре появилась система предметов, вам необходимо подключить <a href="/doc/modules">модуль</a> "Система инвентаря". После этого в административном интерфейсе появится меню "Инвентарь", через который настраивается основная часть системы.</p>

<h1>Параметры предметов</h1>

<p>Предметы могут иметь различные характеристики. Набор параметров, которые вы можете приписать предмету, вы задаёте самостоятельно через <a href="/doc/parameters">систему параметров</a>. Для этого зайдите в раздел "Инвентарь / Параметры предметов" и создайте необходимые вам параметры.</p>

<h1>Тип предметов и экземпляр предмета</h1>

<p>...</p>

<h1>Редактор типов предметов</h1>

<p>Через меню "Инвентарь / Типы предметов" вы можете создавать новые предметы и вводить их в игру. У каждого предмета есть набор основных параметров: <img class="doc-screenshot" src="/st/tutorial/inventory-8.png" alt="" /></p>
<ul>
	<li>Название предмета</li>
	<li>Порядок сортировки &mdash; предметы будут сортироваться в порядке возрастания этого числа.</li>
	<li>"Предмет можно выбросить" &mdash; <a href="/doc/script">скриптовое</a> выражение, позволяющее определить, имеет ли данный персонаж право выбросить данный предмет. Вы можете запретить выбрасывать предмет, прописав сюда 0. Или разрешить, прописав 1.</li>
	<li>Балансировочная цена &mdash; это цена предмета, которая будет показываться в библиотеке, в административных интерфейсах и т.д. В магазинах предмет может продаваться по другим ценам, не обязательно совпадающим с балансировочной. Но во всех расчётах, когда вам потребуется, например, узнать сумму денег, потраченную персонажами в бою, будет использоваться именно балансировочная цена.</li>
	<li>Описание предмета будет показываться в библиотеке и в других интерфейсах.</li>
</ul>

<h1>Рубрикаторы</h1>

<p>В инвентаре персонажа может находиться большое количество предметов. Чтобы игроку было удобнее их просматривать, имеет смысл сгруппировать их по категориям. Практика показывает, что один и тот же набор категорий не подходит для всех интерфейсов игры. К примеру, в инвентаре персонажа имеет смысл сделать раздел "Квесты", в который будут помещаться все квестовые предметы. Однако, если вы делаете игровую биржу, то сваливать предметы по всем квестам в одну кучу будет неудобно, поскольку персонаж обычно проходит не более 5 квестов, а на бирже могут продаваться предметы для всех 100 квестов, имеющихся в игре. В результате, рубрикатор для биржи должен быть другим: "Квесты в подземелье", "Курьерские квесты" и т.д. Для админки рубрикатор вообще будет третьим, т.к. зачастую удобно группировать предметы не по назначению (отдельно экипировка, отдельно расходники), а по области применения ("новый год", "день победы", "нубоквесты" и т.д)</p>

<p>В связи с этим, для каждого из игровых интерфейсов предусмотрена возможность сделать свой рубрикатор. Это делается через меню "Инвентарь/рубрикаторы": <img class="doc-screenshot" src="/st/tutorial/inventory-5.png" alt="" /></p>
<p>Каждый из рубрикаторов настраивается индивидуально. Вы можете создавать в нём любое количество категорий: <img class="doc-screenshot" src="/st/tutorial/inventory-6.png" alt="" /></p>
<p>Для каждой из категорий настраивается её название, порядок сортировки и дополнительные признаки: <img class="doc-screenshot" src="/st/tutorial/inventory-7.png" alt="" /></p>
<p>Параметр "Эта категория открывается по умолчанию" позволяет вам определить, какая вкладка будет открыта, когда игрок открывает соответствующий интерфейс (например, заходит в инвентарь). Если в этой категории нет ни одного предмета, то откроется первая по счёту вкладка.</p>
<p>Параметр "категория для всех предметов, не подходящих в другие категории" обозначает раздел "Разное". Если у вас есть предметы, которым вы ещё не успели задать категорию, то они автоматически попадут в этот раздел. Если у вас были предметы в какой-то категории, а потом вы эту категорию удалили, то эти предметы автоматически попадут в категорию "Разное". Если вы не укажете ни одной категории этот признак, то "бесхозные" предметы вообще не будут отображаться.</p>

<p>После создания рубрикатора вы можете через редактор типов предметов присвоить каждому предмету категории, к которым он относится: <img class="doc-screenshot" src="/st/tutorial/inventory-9.png" alt="" /></p>

<h1>Изображения предметов</h1>

<p>Через меню "Инвентарь / Конфигурация инвентаря" вы можете настроить общие параметры, касающие изображений. Первое, что необходимо настроить, это размеры картинок, которые должны существовать для всех предметов: <img class="doc-screenshot" src="/st/tutorial/inventory-1.png" alt="" /></p>

<p>В этом же интерфейсе необходимо указать размеры изображений для инвентаря и библиотеки.</p>

<p>Для каждого предмета вы можете загрузить изображения в нескольких размерах: <img class="doc-screenshot" src="/st/tutorial/inventory-10.png" alt="" /></p>

<p>Вы можете как заменить все изображения предмета разом (выбрав пункт "Заменить все изображения"), так и каждый размер в отдельности (выбрав пункт "Заменить отдельные изображения"). Конструктор автоматически смасштабирует и откадрирует загруженные изображения под нужные размеры.</p>

<p>При отображении предмета система попытается найти картинку, в точности равную тому размеру, в котором она должна показываться. Если точного размера не нашлось, то система попытается найти наиболее близкое по размеру, которое меньше заданного. Если и это не удалось, и все имеющиеся картинки больше, чем надо, то будет выбрано самое маленькое из доступных. Если картинок у предмета не окажется совсем, то предмет будет отображён без картинки.</p>

<h1>Ограничения грузоподъёмности персонажей</h1>

<p>Одно из ограничений &mdash; максимальное количество разных типов предметов, которые могут храниться в инвентаре одновременно, &mdash; настраивается в разделе "Инвентарь / Конфигурация инвентаря". Здесь вы можете задать выражение для вычисления количества, в зависимости от параметров персонажа. Обратите внимание, что есть техническое ограничение в 200 типов, больше которого поместить в инвентарь будет невозможно: <img class="doc-screenshot" src="/st/tutorial/inventory-2.png" alt="" /></p>

<p>Это ограничение связано с производительностью движка. Ведь при каждой загрузке инвентаря системе необходимо будет загрузить из базы данных параметры всех предметов. Чем оно будет меньше, тем выше будет скорость загрузки инвентаря в вашей игре.</p>

<p>Кроме того, вы можете задать собственный набор дополнительных ограничений на грузоподъёмность персонажа. Для этого через интерфейс "Персонажи / Ограничения грузоподъёмности" вы можете создать любое количество правил, которые будут проверяться при попытке положить предметы в инвентарь персонажа: <img class="doc-screenshot" src="/st/tutorial/inventory-3.png" alt="" /></p>

<p>Для каждого правила вам необходимо задать три параметра: выражение для вычисления текущего груза на персонаже, выражение для вычисления максимального груза, который данный персонаж может поднять, и выражение для вычисления текста, который надо будет показать игроку, если у его персонажа будет перегруз по этому правилу: <img class="doc-screenshot" src="/st/tutorial/inventory-4.png" alt="" /></p>

<p>К примеру, если вы создадите предметам параметр "вес" (weight), а персонажам &mdash; параметр "грузоподъёмность" (max_cargo), то вы сможете создать правило для грузоподъёмности в том виде, как оно приведено на скриншоте выше. Аналогичным образом можно создать правила для "объёма", "максимального магического фона" от предметов в инвентаре и т.д. Количество правил не ограничено. Описание языка скриптов приведено в <a href="/doc/script">соответствующем разделе документации</a>.</p>

<p>Замечание. При выдаче предметов через административный интерфейс ограничения не проверяются &mdash; вы можете выдать столько предметов, сколько сочтёте нужным.</p>

<h1>Пользовательские интерфейсы</h1>
<h1>Библиотека</h1>
<h1>Дополнительная информация</h1>
<h1>Админка по инвентарю</h1>
<h1>Отслеживание предметов</h1>
<h1>Срок годности</h1>
