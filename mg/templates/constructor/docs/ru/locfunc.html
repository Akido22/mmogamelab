<!-- doc.title Настройка спецфункций локаций -->
<!-- doc.parent locations -->
<!-- doc.keywords локации, функции, спецфункции, онлайн-игры -->
<!-- doc.description Описание настроек спецфункций локаций в конструкторе онлайн-игр -->

<h1>Спецфункции локаций</h1>

<p>У администратора есть возможность подключать к любой локации дополнительные спецфункции, которые будут доступны только персонажам, находящимся в этой локации. К примеру, одной из спецфункций может быть <a href="/doc/shops">магазин</a>. У локации может быть произвольное количество спецфункций.</p>

<h1>Настройка спецфункций</h1>

<p>Спецфункции локации настраиваются на вкладке "Спецфункции" в редакторе локаций: <img src="/st/tutorial/locfunc-1.png" alt="" class="doc-screenshot" /></p>
<p>Некоторые спецфункции создаются системой автоматически, некоторые администратор создаёт самостоятельно. К примеру, если в локации есть направление "Выход", то спецфункция "Выход" создаётся автоматически. Администратор может изменить изменить её заголовок, расположение в меню, либо скрыть её совсем.</p>
<p>Чтобы создать или изменить спецфункцию, администратор должен заполнить следующую форму: <img src="/st/tutorial/locfunc-2.png" alt="" class="doc-screenshot" /></p>

<ul>
	<li>Идентификатор спецфункции &mdash; строка, состоящая из английских букв, цифр и знаков "_", начинающая с префикса "u_". В пределах локации идентификатор должен быть уникальным. В разных локациях идентификаторы могут повторяться;</li>
	<li>галочка "Спецфункция по умолчанию" указывает, что именно этот интерфейс должен открываться при входе персонажа в локацию, а также при нажатии на кнопку "Локация" в интерфейсе игры;</li>
	<li>Название функции &mdash; текст, который будет показываться в меню и в заголовках;</li>
	<li>галочка "Показывать в меню" позволяет скрыть спецфункцию из меню. Скрытая функция по-прежнему доступна по прямой ссылке. В частности, можно открывать её при помощи активных зон на локации;</li>
	<li>Доступность функции для персонажа &mdash; скриптовое выражение, определяющее доступность спецфункции данному персонажу. Недоступные функции также скрываются и из меню локации;</li>
	<li>Функция &mdash; это выбор спецфункции. В зависимости от выбранной функции, могут появиться дополнительные настройки.</li>
</ul>

<h1>Визуализация меню спецфункций</h1>

<p>Если в локации есть несколько спецфункций, то в ней появляется меню. Если быть точнее, то меню появляется только в том случае, если в нём есть хотя бы одна спецфункция, которая не является открытым в данный момент интерфейсом. Например, если в локации есть магазин, скрытый из меню, то при отображении самой локации меню показываться не будет, а при отображении интерфейса магазина меню появится, и в нём будет единственная функция &mdash; "Локация", возвращающая игрока к изображению локации. Оформление меню задаётся в шаблоне <a href="/doc/game-template/internal.html">internal.html</a> (список menu_left).</p>

<h1>Доступ к интерфейсу спецфункции</h1>

<p>Интерфейс спецфункции доступен по URL "/location/<strong>идентификатор</strong>", когда персонаж находится в локации, в которой определена эта спецфункция. При открытии страницы система проверит доступность интерфейса, и если окажется, что он не доступен в данный момент, игроку будет показано всплывающее сообщение об этом, и он будет переадресован на интерфейс локации.</p>

<p>Для удобства администратора, он может определить активную зону на локации, прописать ей действие "Открыть спецфункцию локации" и выбрать спецфункцию из выпадающего списка.</p>

<h1>Дополнительно</h1>

<ul>
	<li><a href="/doc/locations">Система локаций</a></li>
	<li><a href="/doc/script">Описание скриптового движка</a></li>
	<li><a href="/doc/design/gameinterface">Настройка оформления игры</a></li>
	<li><a href="/doc/globfunc">Глобальные интерфейсы</a></li>
</ul>
