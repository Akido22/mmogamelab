<!-- doc.title Платные услуги в конструкторе онлайн-игр -->
<!-- doc.parent index -->
<!-- doc.keywords платные услуги, реальные деньги, онлайн-игра -->
<!-- doc.description Статья о системе настройки платных услуг в конструкторе онлайн-игр -->

<p>Одним из способов монетизации игры является предоставление платных услуг по подписке. В меню "Экономика / Платные услуги" перечислены все доступные платные услуги: <img class="doc-screenshot" src="/st/tutorial/paid-1.png" alt="" /></p>
<p>У вас есть возможность включать и отключать каждую из услуг. Если отключить услугу, то это означает, что она перестанет быть платной, но самая функция останется доступной. Например, если вы хотите, чтобы все игроки могли бесплатно переключать цвет своих сообщений в чате, отключите соответствующую платную услугу. Если вы хотите, чтобы никто не мог воспользоваться этой возможностью, то оставьте услугу включённой, но уберите возможность её купить (сотрите все цены).</p>
<p>Вы можете задавать несколько предложений по каждой услуге. Например, стоимость услуги на 1 день будет 1 рубль, на неделю &mdash; 5, а на месяц &mdash; 15 рублей. Если стереть все цены, то купить услугу будет невозможно и она пропадёт из списка платных услуг в игровом интерфейсе.</p>
<p>Вы также можете продавать услуги не по одной, а пакетами. Для этого выберите пункт "Новый пакет платных услуг": <img class="doc-screenshot" src="/st/tutorial/paid-2.png" alt="" /></p>
<p>Установим созданной платной услуге цену (5 Золотых в месяц), отключим цены для одиночных платных услуг (чтобы их нельзя было купить по отдельности) и посмотрим, как это выглядит в админке: <img class="doc-screenshot" src="/st/tutorial/paid-3.png" alt="" /></p>
<p>И в игровом интерфейсе: <img class="doc-screenshot" src="/st/tutorial/paid-4.png" alt="" /></p>
<p>Если не указать время действия услуги (оставить поле пустым), то услуга станет пожизненной &mdash; модификатор установится на неограниченное время.</p>

<h1>Ручное создание платных услуг</h1>
<p>Вы можете создавать собственные платные услуги, не опираясь на те, которые реализованы движком конструктора. Для того, чтобы сделать собственную платную услугу, создайте "Пакет платных услуг", но не отмечайте галочками ни одну из существующих платных услуг. У созданного пакета будет собственный идентификатор, через который можно будет проверять наличие платной услуги через скриптовый движок.</p>

<h1>Автоматическое продление</h1>
<p>Когда игрок оплачивает платную услугу, для неё автоматически включается режим автопродления. Игрок может отключить автопродление или включить его обратно через интерфейс платных услуг.</p>
<p>Когда автопродление активно, при истечении срока действия услуги система попытается автоматически списать оплату за такой же интервал времени, какой был оплачен в прошлый раз. Если это получится, то услуга продлится.</p>
<p>Если на момент окончания действия услуги такой же интервал более не продаётся, то система постарается найти самый большой из интервалов, которые имеются в продаже, и при этом которые меньше прежнего. Если это не удастся, то выполняется поиск самого меньшего из вообще существующих интервалов.</p>
<p>Услуги, длительность которых менее суток, автоматическому продлению не подлежат.</p>

<h1>Интеграция платных услуг со скриптовым движком</h1>
<p>Вы можете проверять, подключены ли платные услуги у персонажа, в выражениях на <a href="/doc/script">скриптовом языке</a>. Для этого важно знать, что подключенная платная услуга технически оформлена как модификатор, и, соответственно, может быть проверена через выражение <strong>char.mod.u_super_puper_premium</strong>.</p>
<p>Кроме того, при подключении пакета платных услуг, автоматически добавляются и модификаторы всех входящие в него услуг, т.е. если подключить пакет из примера выше, то кроме <strong>char.mod.u_super_puper_premium</strong> установятся также <strong>char.mod.chat_colours</strong> и <strong>char.mod.fastmove</strong>.</p>
<p>При покупке платной услуги через игровой интерфейс и при её автоматическом продлении вызывается квестовое событие "paidservice", которое может быть обработано через <a href="/doc/quests">квестовый движок</a>:</p>
<pre class="doc-code-sample">
paidservice {
  message "Куплена платная услуга {mod} на {period} сек"
}
</pre>

<h1>Дополнительно</h1>
<ul>
	<li><a href="/doc/design/paid-services">Оформление списка платных услуг</a></li>
	<li><a href="/doc/script">Скриптовый движок</a></li>
	<li><a href="/doc/quests">Квесты и триггеры</a></li>
</ul>
