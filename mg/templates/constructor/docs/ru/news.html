<!-- doc.title Система новостей в конструкторе игр -->
<!-- doc.parent index -->
<!-- doc.keywords новости, события, онлайн-игры -->
<!-- doc.description Описание работы системы новостей в конструкторе онлайн-игр -->

<h1>Система новостей</h1>

<p>Система новостей позволяет администраторам онлайн-игр публиковать новости в своих играх. Публикация возможна как на титульной странице игры, так и на других страницах при помощи <a href="#hook">специального тега</a>.</p>

<p>Чтобы в игре появилась система новостей, вам необходимо подключить <a href="/doc/modules">модуль</a> "Новости" (становится доступен после подключения модуля "Социальные модули"). После этого в административном интерфейсе модуля "Социалка" появится пункт меню "Новости":</p>

<img class="doc-screenshot" src="/st/tutorial/news-0.png" alt="" />

<a name="config"></a>

<h1>Конфигурация системы новостей</h1>

<p>Для модуля новостей доступны следующие настройки:</p>

<img class="doc-screenshot" src="/st/tutorial/news-1.png" alt="" />

<ul>
    <li>Создавать темы на форуме &mdash; при публикации новости, на форуме будет создана тема с содержанием, аналогичным содержанию новости. При активации данной опции необходимо также выбрать раздел форума, в котором будут публиковаться темы с новостями;</li>
    <li>Показывать на стартовой странице &mdash; на стартовой странице игры будет отображаться несколько последних новостей. Число отображаемых новостей может быть изменено по усмотрению администратора.</li>
</ul>

<a name="categories"></a>

<h1>Управление разделами новостей</h1>

<img class="doc-screenshot" src="/st/tutorial/news-2.png" alt="" />

<p>При создании новости администратор игры имеет возможность указать раздел, к которому относится публикуемая новость.</p>
<p>При создании раздела новостей у администратора есть возможность указать заголовок раздела и порядок сортировки для создаваемого элемента. Параметр "порядок сортировки" влияет только на отображение разделов при создании новостей.</p>

<img class="doc-screenshot" src="/st/tutorial/news-3.png" alt="" />

<img class="doc-screenshot" src="/st/tutorial/news-4.png" alt="" />
<p>После создания раздела новостей, у администратора есть возможность отредактировать его параметры или удалить. При удалении раздела, новости, созданные под этим раделом, удалены не будут.</p>

<h1>Публикация новостей</h1>
<img class="doc-screenshot" src="/st/tutorial/news-5.png" alt="" />
<p>При создании новости администратору доступны для заполнения следующие поля:</p>
<ul>
    <li>Заголовок новости &mdash; основная тема новости;</li>
    <li>Раздел &mdash; категория, к которой относится создаваемая новость. Не обязателен для заполнения;</li>
    <li>Анонс &mdash; краткое содержание новости. Данный текст будет отображаться в списке новостей на стартовой странице и в архиве новостей;</li>
    <li>Текст новости &mdash; основное содержание новости.</li>    
</ul>

<img class="doc-screenshot" src="/st/tutorial/news-6.png" alt="" />

<p>После сохранения новой записи новость получает статус "черновик" и отображается в соответствующем списке. Записи со статусом "черновик" не отображаются ни на главной странице, ни на форуме, ни в архиве новостей.</p>

<img class="doc-screenshot" src="/st/tutorial/news-7.png" alt="" />

<p>После нажатия на ссылку "опубликовать" новость отображается на главной странице игры (если активна соответствующая опция) и в архиве новостей. Если активна опция "создавать темы на форуме", то в соответствующем разделе форума будет создана тема с текстом новости. Авторство темы будет принадлежать тому администратору, который опубликовал новость.</p>

<img class="doc-screenshot" src="/st/tutorial/news-8.png" alt="" />

<a name="design"></a>

<h1>Оформление новостей</h1>

<p>Новости на титульной странице оформляются через <a href="/doc/design/indexpage">шаблон титульной страницы</a>. Полный текст новости оформляяется через шаблон социалки <a href="/doc/socio-template/news-entry.html">news-entry.html</a>. Он имеет следующие поля:</p>

<ul>
    <li>publication_date &mdash; дата публикации новости;</li>
    <li>subject &mdash; тема новости;</li>
    <li>news_content &mdash; текст новости;</li>
    <li>forum_topic &mdash; идентификатор топика новости на форуме (может отсутствовать);</li>
    <li>translation.comments &mdash; переведённое на язык игры слово "Комментарии".</li>
</ul>

<p>Список новостей (страница /news) оформляется при помощи шаблона <a href="/doc/socio-template/news-list.html">news-list.html</a>. Он имеет следующие поля:</p>

<ul>
    <li>pages &mdash; список страниц (может отстутствовать). Каждый элемент списка - номер страницы;</li>
    <li>news &mdash; список новостей. Каждый элемент списка имеет поля:<ul>
        <li>publication_date &mdash; дата публикации;</li>
        <li>announce &mdash; анонс новости;</li>
        <li>uuid &mdash; идентификатор новости;</li>
        <li>subject &mdash; тема новости;</li>
        <li>forum_topic &mdash; идентификатор топика новости на форуме (может отсутствовать);</li>
    </ul></li>
    <li>translation.news_archive &mdash; переведённая фраза "Архив новостей";</li>
    <li>translation.pages &mdash; переведённое слово "Страницы";</li>
    <li>translation.read_more &mdash; переведённая фраза "Читать далее...".</li>
</ul>

<a name="hook"></a>

<h1>Новостные теги</h1>

<p>Администратор игры имеет возможность вставить блок последних новостей в любой игровой интерфейс. Для этого ему необходимо воспользоваться специальным тегом:</p>

<pre class="doc-code-sample">
&lt;hook:news.last /&gt;
</pre>

<p>В это место шаблона будет подставлен блок из 5 последних новостей. Если администратор хочет изменить количество, он может воспользоваться атрибутом limit:</p>

<pre class="doc-code-sample">
&lt;hook:news.last limit="10" /&gt;
</pre>

<p>Оформление блока осуществляется при помощи шаблона социалки <a href="/doc/socio-template/news.html">news.html</a>. Он имеет следующие поля:</p>

<ul>
    <li>news &mdash; список новостей. Каждый элемент списка имеет поля:<ul>
        <li>publication_date &mdash; дата публикации;</li>
        <li>announce &mdash; анонс новости;</li>
        <li>uuid &mdash; идентификатор новости;</li>
        <li>subject &mdash; тема новости;</li>
        <li>actions &mdash; меню действий. Каждый элемент меню имеет следующие поля:<ul>
            <li>href &mdash; URL ссылки;</li>
            <li>text &mdash; текст ссылки;</li>
            <li>lst &mdash; признак последнего элемента.</li>
        </ul></li>
    </ul></li>
</ul>

<p>Администратор имеет возможность настроить разные шаблоны для разных блоков новостей. Для этого можно указать атрибут template с именем желаемого шаблона:</p>

<pre class="doc-code-sample">
&lt;hook:news.last template="news-alternative.html" /&gt;
</pre>

<h1>Дополнительная информация</h1>

<ul>
    <li><a href="/doc/design/indexpage">Оформление титульной страницы</a></li>
    <li><a href="/doc/design/sociointerface">Оформление интерфейсов социалки</a></li>
    <li><a href="/doc/design/templates">Описание шаблонизатора</a></li>
</ul>
